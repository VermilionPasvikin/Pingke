# 评课系统开发环境配置指南

## 目录

1. [文档目的](#文档目的)
2. [系统要求](#系统要求)
3. [后端环境配置](#后端环境配置)
4. [前端环境配置](#前端环境配置)
5. [数据库配置](#数据库配置)
6. [项目启动](#项目启动)
7. [开发工具推荐](#开发工具推荐)
8. [常见问题](#常见问题)

## 文档目的

本文档旨在帮助开发人员快速搭建评课系统的开发环境，确保前后端开发环境的一致性和可重现性。

## 系统要求

### 硬件要求

- **处理器**: 至少双核处理器，推荐四核或更高
- **内存**: 至少4GB RAM，推荐8GB或更高
- **存储空间**: 至少20GB可用空间

### 软件要求

#### 后端要求

- **操作系统**: Windows 10/11, macOS, Linux
- **Python**: 3.8 或更高版本
- **pip**: 最新版本
- **数据库**: SQLite (开发环境), MySQL (生产环境)
- **Git**: 版本控制工具

#### 前端要求

- **Node.js**: 14.x 或更高版本
- **npm**: 6.x 或更高版本
- **微信开发者工具**: 最新稳定版

## 后端环境配置

### 1. 安装Python和pip

#### Windows

1. 访问 [Python官网](https://www.python.org/downloads/)
2. 下载Python 3.8或更高版本
3. 安装时勾选"Add Python to PATH"
4. 安装完成后，在命令行中验证:
   ```
   python --version
   pip --version
   ```

#### macOS

1. 使用Homebrew安装Python:
   ```
   brew install python
   ```
2. 验证安装:
   ```
   python3 --version
   pip3 --version
   ```

#### Linux (Ubuntu/Debian)

1. 更新软件包列表:
   ```
   sudo apt update
   ```
2. 安装Python和pip:
   ```
   sudo apt install python3 python3-pip
   ```
3. 验证安装:
   ```
   python3 --version
   pip3 --version
   ```

### 2. 克隆项目代码

```
git clone [项目仓库地址]
cd pingke/backend
```

### 3. 创建虚拟环境

#### Windows

```
python -m venv venv
venv\Scripts\activate
```

#### macOS/Linux

```
python3 -m venv venv
source venv/bin/activate
```

### 4. 安装依赖

在激活虚拟环境后，安装项目依赖:

```
pip install -r requirements.txt
```

如果没有requirements.txt文件，可以手动安装以下依赖:

```
pip install flask flask-sqlalchemy flask-cors flask-jwt-extended gunicorn pymysql python-dotenv
```

### 5. 配置环境变量

1. 在backend目录下创建.env文件:
   ```
   touch .env
   ```

2. 编辑.env文件，添加以下配置:
   ```
   # Flask配置
   FLASK_APP=app.py
   FLASK_ENV=development
   
   # 数据库配置 (SQLite开发环境)
   DATABASE_URL="sqlite:///app.db"
   
   # JWT密钥
   JWT_SECRET_KEY="your-secret-key-here"
   
   # 跨域配置
   CORS_ORIGINS="http://localhost:3000,http://127.0.0.1:3000"
   ```

   注意：生产环境应使用更安全的密钥和MySQL数据库。

## 前端环境配置

### 1. 安装Node.js和npm

#### Windows/macOS

1. 访问 [Node.js官网](https://nodejs.org/)
2. 下载并安装LTS版本
3. 安装完成后，在命令行中验证:
   ```
   node --version
   npm --version
   ```

#### Linux (Ubuntu/Debian)

1. 使用NodeSource安装Node.js:
   ```
   curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
   sudo apt-get install -y nodejs
   ```
2. 验证安装:
   ```
   node --version
   npm --version
   ```

### 2. 安装微信开发者工具

1. 访问 [微信开发者工具官网](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 下载并安装适合您操作系统的版本
3. 使用微信扫码登录

### 3. 导入小程序项目

1. 打开微信开发者工具
2. 点击"导入项目"
3. 选择项目目录（pingke/frontend）
4. 填写AppID（如使用测试环境可选择"不使用AppID"）
5. 点击"导入"

## 数据库配置

### 使用SQLite（开发环境）

1. SQLite数据库会在应用启动时自动创建
2. 运行数据库迁移（如有）:
   ```
   flask db upgrade
   ```

### 使用MySQL（可选，生产环境）

1. 安装MySQL（如果尚未安装）

2. 创建数据库:
   ```sql
   CREATE DATABASE pingke DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. 创建数据库用户并授权:
   ```sql
   CREATE USER 'pingke_user'@'localhost' IDENTIFIED BY 'your_password';
   GRANT ALL PRIVILEGES ON pingke.* TO 'pingke_user'@'localhost';
   FLUSH PRIVILEGES;
   ```

4. 更新.env文件中的数据库配置:
   ```
   DATABASE_URL="mysql+pymysql://pingke_user:your_password@localhost/pingke"
   ```

## 项目启动

### 启动后端服务

1. 确保已激活虚拟环境
2. 运行Flask应用:
   ```
   flask run
   ```
   或者使用Python直接运行:
   ```
   python app.py
   ```

3. 服务默认运行在 http://localhost:5000

### 启动前端开发

1. 在微信开发者工具中打开项目
2. 点击工具栏上的"编译"按钮
3. 在模拟器中查看和测试小程序
4. 如有修改，点击"保存"后会自动重新编译

## 开发工具推荐

### 后端开发工具

- **VS Code**: 轻量级代码编辑器，支持Python插件
- **PyCharm**: Python专业IDE，提供强大的调试和代码分析功能
- **Postman**: API测试工具，用于测试后端接口

### 前端开发工具

- **VS Code**: 结合微信开发者工具使用，提供更好的代码编辑体验
- **微信开发者工具**: 官方开发工具，提供调试和预览功能
- **微信小程序开发助手**: 移动端调试工具

## 常见问题

### 1. 虚拟环境创建失败

**解决方案:**
- 确保Python版本符合要求
- 检查系统权限，确保有创建文件的权限
- 尝试使用其他方式创建虚拟环境，如virtualenv

### 2. 依赖安装失败

**解决方案:**
- 更新pip到最新版本:
  ```
  pip install --upgrade pip
  ```
- 对于特定包的安装失败，可以单独尝试安装:
  ```
  pip install [package_name]
  ```
- 检查网络连接是否正常

### 3. 数据库连接失败

**解决方案:**
- 检查.env文件中的数据库配置是否正确
- 确保MySQL服务正在运行
- 验证数据库用户名和密码是否正确
- 检查是否有足够的权限访问数据库

### 4. 微信开发者工具导入项目失败

**解决方案:**
- 确保项目目录结构正确
- 检查AppID是否有效（如使用）
- 更新微信开发者工具到最新版本

### 5. 前端与后端接口连接失败

**解决方案:**
- 确保后端服务正在运行
- 检查前端配置中的API基础URL是否正确
- 确认是否存在跨域问题，可在后端启用CORS
- 使用Postman测试后端接口是否正常工作

---

**版本信息：**
- 文档版本：1.0.0
- 发布日期：2025-11-01

**版权声明：**
本文档版权归评课系统开发团队所有，未经授权，不得复制或传播。